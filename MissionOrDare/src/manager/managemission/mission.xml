<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  	
<mapper namespace="Mission">
	<insert id="insertCategory" parameterType="Dtos.MissionCategoryDto">
		insert into MOD_MissionCategory values(
		'category'||lpad(seq_mission_category.nextval,5,0) ,#{large_category}, #{small_category}, #{category_image, jdbcType=VARCHAR} )
	</insert>
	<select id="getCount" resultType="int">
		select count(*) from MOD_MissionCategory
	</select>
	<select id="getSearchCount" resultType="int">
		select count(*) from MOD_MissionCategory where large_category like '%'||#{category}||'%'  or small_category like '%'||#{category}||'%'
	</select>
	<select id="getMissionCategorys" parameterType="java.util.Map" resultType="Dtos.MissionCategoryDto">
		select mission_category_id, large_category, small_category, r
		from (select mission_category_id, large_category, small_category, rownum r
		from (select mission_category_id, large_category, small_category
		from MOD_MissionCategory order by large_category, small_category) order by large_category, 	small_category)
		where r &gt;= #{start} and r &lt;= #{end}
	</select>
	<select id="getSearchCategorys" parameterType="java.util.Map" resultType="Dtos.MissionCategoryDto">
		select mission_category_id, large_category, small_category, r
		from (select mission_category_id, large_category, small_category, rownum r
		from (select mission_category_id, large_category, small_category
		from MOD_MissionCategory where large_category like '%'||#{category}||'%'  or small_category like '%'||#{category}||'%' 
		order by large_category, small_category) order by large_category, 	small_category)
		where r &gt;= #{start} and r &lt;= #{end}
	</select>
	<delete id="deleteCategory" parameterType="String">
		delete from MOD_MissionCategory where mission_category_id=#{missionCategoryId}
	</delete>
</mapper>